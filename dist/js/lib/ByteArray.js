(function(){function l(){for(var a=[],b=0,d=arguments.length;b<d;b++)a[b]=arguments[b];postMessage({type:"debug",message:a})}var h=String.fromCharCode,g=Math.pow;g(2,-23);ByteArray=function(a,b){void 0==a?(a=new ArrayBuffer(5242880),this.length=0):this.length=a.byteLength;this.position=0;this.endian=void 0!==b?b:ByteArray.BIG_ENDIAN;this._bitBuffer=null;this._bitPosition=8;this._buffer=a;this._dataview=new DataView(this._buffer);var d={readUnsignedByte:"readUI8",readUnsignedShort:"readUI16",readUnsignedInt:"readUI32",
readByte:"readSI8",readShort:"readSI16",readInt:"readSI32",readBoolean:"readUI8",writeUnsignedByte:"writeUI8",writeUnsignedShort:"writeUI16",writeUnsignedInt:"writeUI32",writeByte:"writeSI8",writeShort:"writeSI16",writeInt:"writeSI32",writeBoolean:"writeUI8"},e;for(e in d)this[e]=this[d[e]]};ByteArray.BIG_ENDIAN="bigEndian";ByteArray.LITTLE_ENDIAN="littleEndian";ByteArray.prototype={resizeBuffer:function(a){a=new ArrayBuffer(a);(new Int8Array(a)).set(new Int8Array(this._buffer));this._buffer=a;this._dataview=
new DataView(a)},getBytesAvailable:function(){return this.length-this.position},seek:function(a,b){this.position=(b?0:this.position)+a;this.align();return this},readBytes:function(a){a=(this.position+=a)-a;return this._dataview.slice(a,this.position)},writeBytes:function(a){var b,d;l("writeBytes",Array.isArray(a));b=Array.isArray(a)?a:new Int8Array(a._dataview.buffer);for(d=0;d<a.length;d++)this.writeByte(b[d])},readByteAt:function(a){return this._dataview[a]},writeByteAt:function(a,b){this._dataview[a]=
b},readSI8:function(){var a=this._dataview.getInt8(this.position);this.position+=1;this.align();return a},writeSI8:function(a){a=this._dataview.setInt8(this.position,parseInt(a));this.position+=1;this.length+=1;this.align();return a},readSI16:function(a){a=this._dataview.getInt16(this.position,a);this.position+=2;this.align();return a},writeSI16:function(a,b){var d=this._dataview.setInt16(this.position,a,b);this.position+=2;this.length+=2;this.align();return d},readSI32:function(a){a=this._dataview.getInt32(this.position,
a);this.position+=4;this.align();return a},writeSI32:function(a,b){var d=this._dataview.setInt32(this.position,a,b);this.position+=4;this.length+=4;this.align();return d},readUI8:function(){var a=this._dataview.getUint8(this.position);this.position+=1;this.align();return a},writeUI8:function(a){a=this._dataview.setUint8(this.position,parseInt(a));this.position+=1;this.length+=1;this.align();return a},readUI16:function(a){a=this._dataview.getUint16(this.position,a);this.position+=2;this.align();return a},
writeUI16:function(a,b){var d=this._dataview.setUint16(this.position,a,b);this.position+=2;this.length+=2;this.align();return d},readUI32:function(a){a=this._dataview.getUint32(this.position,a);this.position+=4;this.align();return a},writeUI32:function(a,b){var d=this._dataview.setUint32(this.position,a,b);this.position+=4;this.length+=4;this.align();return d},_readFixedPoint:function(a,b){return this.readSB(a)*g(2,-b)},readFixed:function(){return this._readFixedPoint(32,16)},readFixed8:function(){return this._readFixedPoint(16,
8)},readFB:function(a){return this._readFixedPoint(a,16)},readFloat:function(a){a=this._dataview.getFloat32(this.position,a);this.position+=4;this.align();return a},writeFloat:function(a,b){var d=this._dataview.setFloat32(this.position,a,b);this.position+=4;this.length+=4;this.align();return d},readDouble:function(a){a=this._dataview.getFloat64(this.position,a);this.position+=8;this.align();return a},writeDouble:function(a,b){var d=this._dataview.setFloat64(this.position,a,b);this.position+=8;this.length+=
8;this.align();return d},readEncodedU32:function(){for(var a=0,b=0;5>b;b++){var d=this.readByteAt(this.position++),a=a|(d&127)<<7*b;if(!(d&128))break}return a},align:function(){this._bitPosition=8;this._bitBuffer=null},readUB:function(a,b){for(var d=0,e=0;e<a;e++)8==this._bitPosition&&(this._bitBuffer=this.readUI8(),this._bitPosition=0),d=b?d|(this._bitBuffer&1<<this._bitPosition++?1:0)<<e:d<<1|(this._bitBuffer&128>>this._bitPosition++?1:0);return d},writeUB:function(a,b){if(0!=b){0==this._bitPosition&&
(this._bitPosition=8);for(;0<b;){for(;0<this._bitPosition&&0<b;)0!=(a&1<<b-1)&&(this._bitBuffer|=1<<this._bitPosition-1),--b,--this._bitPosition;0==this._bitPosition&&(this.writeUI8(this._bitBuffer),this._bitBuffer=0,0<b&&(this._bitPosition=8))}}},readSB:function(a){if(!a)return 0;var b=this.readUB(a);return 1==b>>>a-1?-((~b&-1>>>-a)+1):b},writeSB:function(a,b){writeUB(a|(0>a?2147483648:0)>>32-b,b)},readUTFChar:function(){var a=this.position++,b=this._dataview.getUint8(a),d=b;255<b?(55296<=b&&56319>=
b?(hi=b,lo=this._dataview.getUint8(a+1),b=1024*(hi-55296)+(lo-56320)+65536,this.position++):56320<=b&&57343>=b&&(hi=this._dataview.getUint8(a-1),lo=b,b=1024*(hi-55296)+(lo-56320)+65536),c=""+b.toString(16).toUpperCase()+";"):c=String.fromCharCode(d);return c},writeUTFChar:function(a){a=a.charCodeAt(0);255<a&&this.writeUI8(a>>>8&255);this.writeUI8(a)},readUTFBytes:function(a){var b=null,b=[];for(a=this.position+a;this.position<a;)b.push(this.readUTFChar());return b=b.join("")},writeUTFBytes:function(a){var b=
a.split("");for(a=a.length;a--;)this.writeUTFChar(b.shift())},readUTF:function(){var a=this.readUI16();return this.readUTFBytes(a)},writeUTF:function(a){this.writeUI16(a.length);this.writeUTFBytes(a)},readString:function(a,b){var d=this._dataview,e=null;if(void 0!=a)e=d.substr(this.position,a),this.position+=a;else{d=[];for(e=this.length-this.position;e--;){var f=this.readByteAt(this.position++),k,g;if(f)b?d.push(h(f)):128>f?d.push(h(f)):191<f&&224>f?(k=this.readByteAt(this.position++),d.push(h((f&
31)<<6|k&63)),e--):(k=this.readByteAt(this.position++),g=this.readByteAt(this.position++),d.push(h((f&15)<<12|(k&63)<<6|g&63)),e-=2);else break}e=d.join("")}return e}}})();
